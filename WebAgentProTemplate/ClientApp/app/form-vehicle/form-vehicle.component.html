<div class="row">
    <div class="col-12">
        <h1>Vehicles</h1>
        <!-- Action buttons in the list are disabled when a Widget is being edited-->
        <button (click)="createVehicle()"  class="btn btn-primary">Create</button>
    </div>
</div>

<div class="col-12">
    <!-- Sets up template variable #widgetForm, submission method onSubmit(),
        and only displays if there is a widget to add/edit. -->
    <form #vehicleForm="ngForm" (ngSubmit)="saveCreate()" *ngIf="vehicleEdit">
        <div class="card">
            <div class="card-header">
                <button type="submit"  class="btn btn-success" [disabled]="!vehicleForm.form.valid" >Save</button>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-6">
                        <label for="primaryDriver">Primary Driver</label>
                        <select id="primaryDriver" name="primaryDriver" #primaryDriver="ngModel" [(ngModel)]="vehicleEdit.driverId" class="form-control" required>
                            <option *ngFor="let d of Did" name="fieldName" ngDefaultControl [value]="d" [selected]="vehicleEdit.driverId == d">{{d}}</option>
                        </select>
                        <div [hidden]="primaryDriver.valid || primaryDriver.untouched" class="alert alert-danger">Primary Driver is required.</div>
                    </div>
                    <div class="form-group col-xs-12 col-lg-6">
                        <label for="vin">VIN</label>
                        <input id="vin" name="vin" #vin="ngModel" [(ngModel)]="vehicleEdit.vin" type="text" class="form-control" pattern="[a-zA-Z0-9]{17}" maxlength="17" required />
                        <div [hidden]="vin.valid || vin.untouched" class="alert alert-danger">Valid vin is required.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="make">Vehicle Make</label>
                        <input id="make" name="make" #make="ngModel" [(ngModel)]="vehicleEdit.make" type="text" class="form-control" required />
                        <div [hidden]="make.valid || make.untouched" class="alert alert-danger">Vehicle make is required.</div>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="model">Model</label>
                        <input id="model" name="model" #model="ngModel" [(ngModel)]="vehicleEdit.model" type="text" class="form-control" required />
                        <div [hidden]="model.valid || model.untouched" class="alert alert-danger">Vehicle model is required.</div>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="year">Year</label>
                        <input id="year" name="year" #year="ngModel" [(ngModel)]="vehicleEdit.year" type="text" class="form-control" pattern=".{4}" maxlength="4" required />
                        <div [hidden]="year.valid || year.untouched" class="alert alert-danger">Vehicle year is required.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="annualMileage">Annual Mileage</label>
                        <input id="annualMileage" name="annualMileage" #annualMileage="ngModel" [(ngModel)]="vehicleEdit.annualMileage" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                        <div [hidden]="annualMileage.valid || annualMileage.untouched" class="alert alert-danger">Annual Mileage is required.</div>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="milesDrivenToWork">Miles Driven to Work</label>
                        <input id="milesDrivenToWork" name="milesDrivenToWork" #milesDrivenToWork="ngModel" [(ngModel)]="vehicleEdit.milesDrivenToWork" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                        <div [hidden]="milesDrivenToWork.valid || milesDrivenToWork.untouched" class="alert alert-danger">Miles Driver to work is required.</div>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="daysDrivenPerWeek">Days Driven per Week</label>
                        <input id="daysDrivenPerWeek" name="daysDrivenPerWeek" #daysDrivenPerWeek="ngModel" [(ngModel)]="vehicleEdit.daysDrivenPerWeek" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                        <div [hidden]="daysDrivenPerWeek.valid || daysDrivenPerWeek.untouched" class="alert alert-danger">Days Driver per week is required.</div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4">
                        <label for="currentValue">Current Value</label>
                        <input id="currentValue" name="currentValue" #currentValue="ngModel" [(ngModel)]="vehicleEdit.currentValue" type="text" class="form-control" pattern="^[0-9]+\.[0-9]{2}$|^[0-9]+$" maxlength="9" required />
                        <div [hidden]="currentValue.valid || currentValue.untouched" class="alert alert-danger">Vehicle Current Value is required.</div>
                    </div>
                </div>
                <label>Check All that Apply:</label>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.dayTimeRunningLights" [ngModelOptions]="{standalone: true}">Daytime Running Lights</label>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.antiTheft" [ngModelOptions]="{standalone: true}">Anti-Theft</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.antiLockBrakes" [ngModelOptions]="{standalone: true}">Anti-Lock Brakes</label>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.reducedUsedDiscount" [ngModelOptions]="{standalone: true}">Reduced Use</label>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.passiveRestraints" [ngModelOptions]="{standalone: true}">Passive Restraints</label>
                    </div>
                    <div class="form-group col-xs-12 col-lg-4 checkbox">
                        <label><input type="checkbox" value="" [(ngModel)]="vehicleEdit.garageDifferentAddressThanResidence" [ngModelOptions]="{standalone: true}">Garage Address Different from Residence</label>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <!-- Cancel and Submit buttons. Can't submit unless for is passing validation. -->
                <div class="form-group">

                    
                </div>
            </div>
        </div>
    </form>
</div>
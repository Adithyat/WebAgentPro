

<div class="col-12">
    <!-- Sets up template variable #widgetForm, submission method onSubmit(),
        and only displays if there is a widget to add/edit.-->
    <form #vehicleForm="ngForm">
        <button (click)="addVehicle()" class="btn btn-success">Add</button>
        <div class="col-12"  *ngFor="let vehicle of quote.quoteVehicles; let i = index">
            <div class="card">
                <div class="card-header">
                        <h5 class="card-title">Vehicle Info {{i+1}}</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="form-group col-xs-12 col-lg-6">
                            <label for="primaryDriver">Primary Driver</label>
                            <select id="primaryDriver" [name]="'primaryDriver' + i" #primaryDriver="ngModel" [(ngModel)]="vehicle.driverId" class="form-control" required>
                                <option *ngFor="let d of quote.quoteDrivers" name="fieldName" ngDefaultControl [value]="d.driverId" [selected]="vehicle.driverId == d.driverId">{{ d.d_FirstName }} {{ d.d_LastName }}</option>
                            </select>
                            <div [hidden]="primaryDriver.valid || primaryDriver.untouched" class="alert alert-danger">Primary Driver is required.</div>
                        </div>
                        <div class="form-group col-xs-12 col-lg-6">
                            <label for="vin">VIN</label>
                            <input id="vin" [name]="'vin' + i" #vin="ngModel" [(ngModel)]="vehicle.vin" type="text" class="form-control" pattern="[a-zA-Z0-9]{17}" maxlength="17" required />
                            <div [hidden]="vin.valid || vin.untouched" class="alert alert-danger">Valid vin is required.</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="make">Vehicle Make</label>
                            <input id="make" [name]="'make' + i" #make="ngModel" [(ngModel)]="vehicle.make" type="text" class="form-control" required />
                            <div [hidden]="make.valid || make.untouched" class="alert alert-danger">Vehicle make is required.</div>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="model">Model</label>
                            <input id="model" [name]="'model' + i" #model="ngModel" [(ngModel)]="vehicle.model" type="text" class="form-control" required />
                            <div [hidden]="model.valid || model.untouched" class="alert alert-danger">Vehicle model is required.</div>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="year">Year</label>
                            <input id="year" [name]="'year'+ i" #year="ngModel" [(ngModel)]="vehicle.year" type="text" class="form-control" pattern=".{4}" maxlength="4" required />
                            <div [hidden]="year.valid || year.untouched" class="alert alert-danger">Vehicle year is required.</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="annualMileage">Annual Mileage</label>
                            <input id="annualMileage" [name]="'annualMileage' + i" #annualMileage="ngModel" [(ngModel)]="vehicle.annualMileage" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                            <div [hidden]="annualMileage.valid || annualMileage.untouched" class="alert alert-danger">Annual Mileage is required.</div>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="milesDrivenToWork">Miles Driven to Work</label>
                            <input id="milesDrivenToWork" [name]="'milesDrivenToWork' + i" #milesDrivenToWork="ngModel" [(ngModel)]="vehicle.milesDrivenToWork" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                            <div [hidden]="milesDrivenToWork.valid || milesDrivenToWork.untouched" class="alert alert-danger">Miles Driver to work is required.</div>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="daysDrivenPerWeek">Days Driven per Week</label>
                            <input id="daysDrivenPerWeek" [name]="'daysDrivenPerWeek' + i" #daysDrivenPerWeek="ngModel" [(ngModel)]="vehicle.daysDrivenPerWeek" type="text" class="form-control" pattern="[0-9]+" maxlength="7" required />
                            <div [hidden]="daysDrivenPerWeek.valid || daysDrivenPerWeek.untouched" class="alert alert-danger">Days Driver per week is required.</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-xs-12 col-lg-4">
                            <label for="currentValue">Current Value</label>
                            <input id="currentValue" [name]="'currentValue' + i" #currentValue="ngModel" [(ngModel)]="vehicle.currentValue" type="text" class="form-control" pattern="^[0-9]+\.[0-9]{2}$|^[0-9]+$" maxlength="9" required />
                            <div [hidden]="currentValue.valid || currentValue.untouched" class="alert alert-danger">Vehicle Current Value is required.</div>
                        </div>
                    </div>
                    <label>Check All that Apply:</label>
                    <div class="row">
                        <div class="form-group col-xs-12 col-lg-4">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.dayTimeRunningLights" [ngModelOptions]="{standalone: true}">Daytime Running Lights</label>
                        </div>
                        <div class="form-group col-xs-12 col-lg-8">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.antiTheft" [ngModelOptions]="{standalone: true}">Anti-Theft</label>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.antiLockBrakes" [ngModelOptions]="{standalone: true}">Anti-Lock Brakes</label>
                        </div>
                        <div class="form-group col-xs-12 col-lg-8">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.reducedUsedDiscount" [ngModelOptions]="{standalone: true}">Reduced Use</label>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.passiveRestraints" [ngModelOptions]="{standalone: true}">Passive Restraints</label>
                        </div>
                        <div class="form-group col-xs-12 col-lg-4">
                            <label><input type="checkbox" value="" [(ngModel)]="vehicle.garageDifferentAddressThanResidence" [ngModelOptions]="{standalone: true}">Garage Address Different from Residence</label>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    
                    <div class="form-group">
                        <button (click)="removeVehicle()" class="btn btn-danger">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

</div>